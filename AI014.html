<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4分割テンプレート</title>
    <style>
        html,
        body {
            margin: 0;
            height: 100%;
            font-family: sans-serif;
        }

        .container {
            display: grid;
            grid-template-columns: 50% 50%;
            grid-template-rows: 50% 50%;
            width: 100vw;
            height: 100vh;
        }

        .pane {
            border: 1px solid #ccc;
            box-sizing: border-box;
            overflow: auto;
            padding: 10px;
        }

        .pane iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 600px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(4, auto);
                /* 各行の高さは自動調整 */
                min-height: 50vh;
                /* ビューポート高さの50%を最低確保 */
                height: auto;
                /* 内容に応じて伸びる */
            }
        }

        /* パネルごとの背景色 */
        #top-left {
            background-color: #fce4ec;
        }

        #top-right {
            background-color: #e3f2fd;
        }

        #bottom-left {
            background-color: #e8f5e9;
        }

        #bottom-right {
            background-color: #fff3e0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="pane" id="top-left">
            <!-- 左上 ここから -->
            <h2>吉澤</h2>
            <!-- 左上 ここまで -->
        </div>
        <div class="pane" id="top-right">
            <!-- 右上 ここから -->
               <!-- 左下 ここから -->
            <!-- <h2>左下</h2> -->
            <div id="tile-game" style="width: 300px; height: 300px; position: relative; background: #f0f0f0;">
                <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>
                <script>
                    let tiles = [];
                    let currentTile = null;
                    let gameStarted = false;
                    let score = 0;
                    let clickCount = 0;
                    let totalTiles = 10;
                    let startTime;
                    let startButton;

                    function setup() {
                        const container = document.getElementById("tile-game");
                        const canvas = createCanvas(container.clientWidth, container.clientHeight);
                        canvas.parent("tile-game");

                        // スタートボタン
                        startButton = createButton('ゲーム開始');
                        startButton.parent('tile-game');
                        startButton.style('position', 'absolute');
                        startButton.style('font-size', '16px');
                        startButton.style('padding', '10px');

                        const centerX = container.clientWidth / 2 - 40;
                        const centerY = container.clientHeight / 2 - 20;
                        startButton.position(centerX, centerY);

                        startButton.mousePressed(startGame);
                    }

                    function startGame() {
                        gameStarted = true;
                        score = 0;
                        clickCount = 0;
                        tiles = [];
                        for (let i = 0; i < totalTiles; i++) {
                            tiles.push({
                                x: random(50, width - 90), // 四角形のサイズ考慮
                                y: random(50, height - 90),
                                time: random(500, 1500) + i * 1000, // 出現時間
                                clicked: false
                            });
                        }
                        startTime = millis();
                        startButton.hide();
                        loop(); // 再開（必要なら）
                    }

                    function draw() {
                        clear();
                        if (!gameStarted) return;

                        const elapsed = millis() - startTime;

                        // タイルを表示
                        for (let i = 0; i < tiles.length; i++) {
                            const tile = tiles[i];
                            if (!tile.clicked && elapsed > tile.time) {
                                fill(0, 150, 255);
                                rect(tile.x, tile.y, 40, 40);
                                currentTile = tile;
                                break;
                            }
                        }

                        // スコア表示（右上）
                        fill(0);
                        textAlign(RIGHT, TOP);
                        textSize(14);
                        text("誤差合計：" + nf(score, 0, 2) + " ms", width - 10, 10);

                        // ゲーム終了
                        if (clickCount >= totalTiles) {
                            fill(0, 150, 0);
                            textAlign(CENTER, CENTER);
                            textSize(24);
                            text("ゲーム終了！", width / 2, height / 2);
                            noLoop(); // 停止
                        }
                    }

                    function mousePressed() {
                        if (!gameStarted || !currentTile) return;

                        // 四角の範囲内クリック判定
                        if (
                            mouseX >= currentTile.x &&
                            mouseX <= currentTile.x + 40 &&
                            mouseY >= currentTile.y &&
                            mouseY <= currentTile.y + 40 &&
                            !currentTile.clicked
                        ) {
                            const expected = currentTile.time;
                            const actual = millis() - startTime;
                            const diff = abs(actual - expected);
                            score += diff;
                            currentTile.clicked = true;
                            clickCount++;
                        }
                    }

                    function windowResized() {
                        const container = document.getElementById("tile-game");
                        resizeCanvas(container.clientWidth, container.clientHeight);

                        // 再配置
                        if (startButton && !gameStarted) {
                            const centerX = container.clientWidth / 2 - 40;
                            const centerY = container.clientHeight / 2 - 20;
                            startButton.position(centerX, centerY);
                        }
                    }
                </script>
            </div>
            <!-- 左下 ここまで -->
            <!-- 右上 ここまで -->
        </div>
        <div class="pane" id="bottom-left">
            <!-- 左下 ここから -->
            <!-- 左下 ここから -->
<h2>今月のカレンダー</h2>
<div id="calendar"></div>

<script>
    // 日本の祝日（固定的な一部＋例示用）
    const holidays = {
        "2025-08-11": "山の日", // 例：2025年8月の祝日
    };

    function generateCalendar(year, month) {
        const calendarEl = document.getElementById("calendar");
        calendarEl.innerHTML = "";

        const today = new Date();
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const monthName = `${year}年 ${month + 1}月`;

        // ヘッダー
        const header = document.createElement("h3");
        header.textContent = monthName;
        calendarEl.appendChild(header);

        const table = document.createElement("table");
        table.style.borderCollapse = "collapse";
        table.style.width = "100%";

        const days = ["日", "月", "火", "水", "木", "金", "土"];
        const thead = document.createElement("thead");
        const trHead = document.createElement("tr");
        days.forEach((day, i) => {
            const th = document.createElement("th");
            th.textContent = day;
            th.style.padding = "4px";
            th.style.color = i === 0 ? "red" : i === 6 ? "blue" : "black";
            trHead.appendChild(th);
        });
        thead.appendChild(trHead);
        table.appendChild(thead);

        const tbody = document.createElement("tbody");
        let tr = document.createElement("tr");
        for (let i = 0; i < firstDay.getDay(); i++) {
            tr.appendChild(document.createElement("td"));
        }

        for (let d = 1; d <= lastDay.getDate(); d++) {
            const date = new Date(year, month, d);
            const td = document.createElement("td");
            const dateStr = `${year}-${String(month + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;

            td.textContent = d;
            td.style.padding = "4px";
            td.style.textAlign = "center";

            // 祝日は赤
            if (holidays[dateStr]) {
                td.style.color = "red";
                td.title = holidays[dateStr];
            } else if (date.getDay() === 0) {
                td.style.color = "red"; // 日曜
            } else if (date.getDay() === 6) {
                td.style.color = "blue"; // 土曜
            }

            tr.appendChild(td);
            if (date.getDay() === 6) {
                tbody.appendChild(tr);
                tr = document.createElement("tr");
            }
        }

        if (tr.children.length > 0) {
            tbody.appendChild(tr);
        }

        table.appendChild(tbody);
        calendarEl.appendChild(table);
    }

    // 今日の年月でカレンダー生成
    const now = new Date();
    generateCalendar(now.getFullYear(), now.getMonth());
</script>
<!-- 左下 ここまで -->

            <!-- 左下 ここまで -->
        </div>
        <div class="pane" id="bottom-right">
            <!-- 右下 ここから -->
            <!-- 右下 ここから -->
<h2>ToDoリスト</h2>
<input type="text" id="todo-input" placeholder="やることを入力" />
<button id="add-btn">追加</button>
<ul id="todo-list"></ul>

<!-- jQuery CDN（未読み込みなら） -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
    $(function () {
        $('#add-btn').on('click', function () {
            const task = $('#todo-input').val().trim();
            if (task !== '') {
                const $li = $('<li></li>').text(task);
                const $delBtn = $('<button>削除</button>').css({
                    marginLeft: '10px',
                    fontSize: '12px'
                });

                $delBtn.on('click', function () {
                    $(this).parent().remove();
                });

                $li.append($delBtn);
                $('#todo-list').append($li);
                $('#todo-input').val('');
            }
        });

        // Enterキーで追加も対応
        $('#todo-input').on('keypress', function (e) {
            if (e.which === 13) {
                $('#add-btn').click();
            }
        });
    });
</script>
<!-- 右下 ここまで -->

            <!-- 右下 ここまで -->
        </div>
    </div>
</body>

</html>