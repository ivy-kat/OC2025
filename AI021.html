<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4分割テンプレート</title>
    <style>
        html,
        body {
            margin: 0;
            height: 100%;
            font-family: sans-serif;
        }

        .container {
            display: grid;
            grid-template-columns: 50% 50%;
            grid-template-rows: 50% 50%;
            width: 100vw;
            height: 100vh;
        }

        .pane {
            border: 1px solid #ccc;
            box-sizing: border-box;
            overflow: auto;
            padding: 10px;
        }

        .pane iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @media (max-width: 600px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(4, auto);
                /* 各行の高さは自動調整 */
                min-height: 50vh;
                /* ビューポート高さの50%を最低確保 */
                height: auto;
                /* 内容に応じて伸びる */
            }
        }

        /* パネルごとの背景色 */
        #top-left {
            background-color: #fce4ec;
        }

        #top-right {
            background-color: #e3f2fd;
        }

        #bottom-left {
            background-color: #e8f5e9;
        }

        #bottom-right {
            background-color: #fff3e0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="pane" id="top-left">
            <!-- 左上 ここから -->
            <h2>sakamoto</h2>
            <!-- 左上 ここまで -->
        </div>
        <div class="pane" id="top-right">
            <!-- 右上 ここから -->
            <!-- 右上 ここから -->
<div id="fireworks" style="width:100%; height:100%; background:black;"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
    let fireworks = [];
    let gravity;

    function setup() {
        const container = document.getElementById("fireworks");
        const canvas = createCanvas(container.clientWidth, container.clientHeight);
        canvas.parent("fireworks");

        gravity = createVector(0, 0.2);

        window.addEventListener("resize", () => {
            resizeCanvas(container.clientWidth, container.clientHeight);
        });

        colorMode(HSB);
        stroke(255);
        strokeWeight(4);
        background(0);
    }

    function draw() {
        colorMode(RGB);
        background(0, 0, 0, 25); // 残像を残す

        if (random(1) < 0.05) {
            fireworks.push(new Firework());
        }

        for (let i = fireworks.length - 1; i >= 0; i--) {
            fireworks[i].update();
            fireworks[i].show();
            if (fireworks[i].done()) {
                fireworks.splice(i, 1);
            }
        }
    }

    class Firework {
        constructor() {
            this.firework = new Particle(random(width), height, true);
            this.exploded = false;
            this.particles = [];
        }

        update() {
            if (!this.exploded) {
                this.firework.applyForce(gravity);
                this.firework.update();

                if (this.firework.vel.y >= 0) {
                    this.exploded = true;
                    this.explode();
                }
            }

            for (let i = this.particles.length - 1; i >= 0; i--) {
                this.particles[i].applyForce(gravity);
                this.particles[i].update();
                if (this.particles[i].done()) {
                    this.particles.splice(i, 1);
                }
            }
        }

        explode() {
            for (let i = 0; i < 80; i++) {
                const p = new Particle(this.firework.pos.x, this.firework.pos.y, false, this.firework.hu);
                this.particles.push(p);
            }
        }

        done() {
            return this.exploded && this.particles.length === 0;
        }

        show() {
            if (!this.exploded) {
                this.firework.show();
            }

            for (let p of this.particles) {
                p.show();
            }
        }
    }

    class Particle {
        constructor(x, y, firework, hu) {
            this.pos = createVector(x, y);
            this.firework = firework;
            this.lifespan = 255;
            this.hu = firework ? random(0, 360) : hu;
            this.vel = firework ? createVector(0, random(-12, -8)) : p5.Vector.random2D().mult(random(2, 8));
            this.acc = createVector(0, 0);
        }

        applyForce(force) {
            this.acc.add(force);
        }

        update() {
            if (!this.firework) {
                this.vel.mult(0.9);
                this.lifespan -= 4;
            }
            this.vel.add(this.acc);
            this.pos.add(this.vel);
            this.acc.mult(0);
        }

        done() {
            return this.lifespan < 0;
        }

        show() {
            colorMode(HSB);
            if (!this.firework) {
                strokeWeight(2);
                stroke(this.hu, 255, 255, this.lifespan);
            } else {
                strokeWeight(4);
                stroke(this.hu, 255, 255);
            }
            point(this.pos.x, this.pos.y);
        }
    }
</script>
<!-- 右上 ここまで -->

            <!-- 右上 ここまで -->
        </div>
        <div class="pane" id="bottom-left">
            <!-- 左下 ここから -->
            <!-- 左下 ここから -->
<div id="calendar" style="width:100%; height:100%; overflow:auto; padding:10px;"></div>

<script>
// 祝日の簡易リスト（年・月・日を「YYYY-MM-DD」形式で）
// 必要に応じて祝日を追加してください
const holidays = {
    "2025-11-03": "文化の日",
    "2025-11-23": "勤労感謝の日",
    // …他の祝日をここに追加…
};

// 今日・今月を取得
const today = new Date();
const year = today.getFullYear();
const month = today.getMonth();  // 0＝1月、10＝11月

function generateCalendar(y, m) {
    const firstDay = new Date(y, m, 1);
    const lastDay = new Date(y, m + 1, 0);
    const startWeekday = firstDay.getDay();  // 0＝日曜
    const daysInMonth = lastDay.getDate();

    let html = `<h3>${y}年 ${m+1}月</h3>`;
    html += '<table style="width:100%; border-collapse: collapse;">';
    html += '<thead><tr>';
    const weekDays = ['日','月','火','水','木','金','土'];
    for (let wd of weekDays) {
        html += `<th style="border:1px solid #aaa; padding:4px;">${wd}</th>`;
    }
    html += '</tr></thead>';
    html += '<tbody><tr>';

    // 空白セル（1日が何曜日か）
    for (let i = 0; i < startWeekday; i++) {
        html += '<td style="border:1px solid #aaa; padding:4px;"></td>';
    }

    // 日付セル
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${y}-${String(m+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
        const isHoliday = holidays[dateStr] !== undefined;
        const weekday = new Date(y, m, day).getDay();

        let style = 'border:1px solid #aaa; padding:4px;';
        // 日曜または祝日を赤色文字に
        if (weekday === 0 || isHoliday) {
            style += 'color:red;';
        }
        html += `<td style="${style}">${day}${isHoliday ? '<br><small>'+holidays[dateStr]+'</small>' : ''}</td>`;

        if (weekday === 6 && day !== daysInMonth) {
            html += '</tr><tr>';
        }
    }

    // 月末の空白セル
    const endWeekday = lastDay.getDay();
    for (let i = endWeekday + 1; i <= 6; i++) {
        html += '<td style="border:1px solid #aaa; padding:4px;"></td>';
    }

    html += '</tr></tbody></table>';
    return html;
}

// カレンダーを差し込み
document.getElementById("calendar").innerHTML = generateCalendar(year, month);
</script>
<!-- 左下 ここまで -->

            <!-- 左下 ここまで -->
        </div>
        <div class="pane" id="bottom-right">
            <!-- 右下 ここから -->
            <!-- 右下 ここから -->
<div id="todo-container" style="width:100%; height:100%; padding:15px; box-sizing:border-box; background:#fffbe6;">
    <h2>ToDo リスト</h2>
    <div id="todo-app">
        <input type="text" id="new-task" placeholder="新しいタスクを入力..." style="width:70%; padding:8px; font-size:14px;">
        <button id="add-task" style="padding:8px 12px; font-size:14px;">追加</button>
        <ul id="task-list" style="list-style:none; padding:0; margin-top:15px;"></ul>
    </div>
</div>

<!-- jQuery 読み込み -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
$(function() {
    // ローカルストレージから読み込み
    const savedTasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    savedTasks.forEach(task => addTask(task.text, task.done));

    // タスク追加ボタン
    $("#add-task").on("click", function() {
        const text = $("#new-task").val().trim();
        if (text !== "") {
            addTask(text, false);
            saveTasks();
            $("#new-task").val("");
        }
    });

    // Enterキーでも追加
    $("#new-task").on("keypress", function(e) {
        if (e.which === 13) $("#add-task").click();
    });

    // タスク追加関数
    function addTask(text, done) {
        const li = $("<li>")
            .text(text)
            .css({
                padding: "8px",
                borderBottom: "1px solid #ddd",
                cursor: "pointer",
                background: done ? "#e0f7fa" : "white",
                textDecoration: done ? "line-through" : "none"
            })
            .on("click", function() {
                $(this).toggleClass("done");
                const isDone = $(this).hasClass("done");
                $(this).css({
                    textDecoration: isDone ? "line-through" : "none",
                    background: isDone ? "#e0f7fa" : "white"
                });
                saveTasks();
            });

        const delBtn = $("<button>")
            .text("削除")
            .css({
                float: "right",
                background: "#ff5252",
                color: "white",
                border: "none",
                borderRadius: "4px",
                padding: "4px 8px",
                cursor: "pointer"
            })
            .on("click", function(e) {
                e.stopPropagation();
                li.remove();
                saveTasks();
            });

        li.append(delBtn);
        $("#task-list").append(li);
        if (done) li.addClass("done");
    }

    // 保存関数
    function saveTasks() {
        const tasks = [];
        $("#task-list li").each(function() {
            tasks.push({
                text: $(this).clone().children().remove().end().text().trim(),
                done: $(this).hasClass("done")
            });
        });
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }
});
</script>
<!-- 右下 ここまで -->

            <!-- 右下 ここまで -->
        </div>
    </div>
</body>

</html>